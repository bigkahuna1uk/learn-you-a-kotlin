Refactoring to Kotlin
==============================================================================

Duncan McGregor @duncanmcg

Nat Pryce @natpryce
